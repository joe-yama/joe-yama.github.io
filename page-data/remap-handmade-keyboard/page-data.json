{"componentChunkName":"component---src-templates-blog-post-js","path":"/remap-handmade-keyboard/","result":{"data":{"site":{"siteMetadata":{"title":"geekerati.net"}},"markdownRemark":{"id":"f792b167-8930-5df7-9622-25935eda252e","excerpt":"3ヶ月に1回ぐらい使用しているキーボードのキーマップを変更したくなるのですが、毎回やり方を忘れてしまうのでメモしておきます。 キーボードに書き込むファームウェアファイルを生成 QMK Configuratorから行います。ブラウザ上でGUI操作でキーマップをレイアウトすることができるので便利です。 QMK…","html":"<p>3ヶ月に1回ぐらい使用しているキーボードのキーマップを変更したくなるのですが、毎回やり方を忘れてしまうのでメモしておきます。</p>\n<h2 id=\"キーボードに書き込むファームウェアファイルを生成\" style=\"position:relative;\"><a href=\"#%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%81%AB%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%80%E3%83%95%E3%82%A1%E3%83%BC%E3%83%A0%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E7%94%9F%E6%88%90\" aria-label=\"キーボードに書き込むファームウェアファイルを生成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>キーボードに書き込むファームウェアファイルを生成</h2>\n<p><a href=\"https://config.qmk.fm/\">QMK Configurator</a>から行います。ブラウザ上でGUI操作でキーマップをレイアウトすることができるので便利です。</p>\n<blockquote>\n<p>QMK Configurator は、QMKファームウェアの .hex や .bin ファイルを生成するオンライングラフィカルユーザーインターフェイスです。\n引用：<a href=\"https://docs.qmk.fm/#/ja/newbs_building_firmware_configurator\">QMK Configuratorのドキュメンテーション</a></p>\n</blockquote>\n<p><code class=\"language-text\">KEYBOARD</code>というドロップダウンリストからデフォルトキーマップを選択します。私は、recompile_keys製の<a href=\"https://keys.recompile.net/projects/choco60-rev2/\">choco60/rev2</a>というキーボードを使用していますので、それを選んだ状態で<code class=\"language-text\">LOAD DEFAULT</code>を押します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3cff90fcebffda774f566d9e3433468d/35d5c/load_default_keymap.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeklEQVQoz4WSS09TYRCG+yNEI6BoNNhyaUFu4Qf4E4wbIa0BAaUrXVCQS2m9VAhEYYGKSYMhLkzcqSAiJMRLbGnpBeQWS7BAa6FpEQo9p+1jzgFJwIVv8iTvN5nMzJcZRbuplYcdD+jtfURnpwWT2UhzS5NMY2MDdyxGWjrNtHfdx2gxYZBizU20tjVjNhsxmdow323ncU83BoMRBUBCTLC1HSMuCNKTZDJFisOScmQSSRkpR9KP3z4c606coSkiW6DY3d0lEAjwfW6Bn/4VIpEIsVgMKS4IAoIoIogCkWiEjY0NwuGwjOQlAqEAq79WWQ2tIYg7KJaWfNTr67hx8zr1+lr0+jpqaquoraumulqHTleB7lolWl0FWu3Vf9DpKtFpK6ipqcLn86HweNyo1Sry8rLJzc1GpTqPUnmO7AtnZU5nnSQ94xjpGWlkZB4/ROYpiROkZ6aRdSYdt9uFYnrGS3G5hqKyfIrKNWiKclBfVFFcqqG0rJCS0gKKS/a8piDngILCXNQalUy+WolarcTr9aAIb4Z5OvyM3nf9WEetDI4NMvBxgIlvE7imXDidDiYdk9jtNhmbzXbgx8fHGB39wNDICG+G3xPd3Py75ThsLpIUBUQxTiIhyhuUfDIhEtveIhgMEN/Z4X+SC25vR+kYsGCf/MKMx86M18HGepDZaQdetw2P24Z/0cProVcM277uNxNJJpOHSKVS+wV34qgM3QwMDRP1z+OfdxEJrbHm97Gy4Cbom2Vuxsk9yyVGx57s3WVClAscRUEqJXd7+dnO5a4+GqwvuNLVx1ubg+n5WbQ9/dx6buW2dRDr+Cfmlpf3j39voqNf/gPtiKI/utzLKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"choco60のデフォルトキーマップを読み込む\"\n        title=\"choco60のデフォルトキーマップを読み込む\"\n        src=\"/static/3cff90fcebffda774f566d9e3433468d/f058b/load_default_keymap.png\"\n        srcset=\"/static/3cff90fcebffda774f566d9e3433468d/c26ae/load_default_keymap.png 158w,\n/static/3cff90fcebffda774f566d9e3433468d/6bdcf/load_default_keymap.png 315w,\n/static/3cff90fcebffda774f566d9e3433468d/f058b/load_default_keymap.png 630w,\n/static/3cff90fcebffda774f566d9e3433468d/40601/load_default_keymap.png 945w,\n/static/3cff90fcebffda774f566d9e3433468d/78612/load_default_keymap.png 1260w,\n/static/3cff90fcebffda774f566d9e3433468d/35d5c/load_default_keymap.png 2760w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>画面下部に表示されているようにGUI上にデフォルトのキーマップが表示されます。このキーボードのコンセプトは「プログラマーに人気のキー配列を分割した 60% キーボード」なので、デフォルトのキーマップはHHKBと全く同じになっていますね。</p>\n<p>私はHHKBも所持しており、気分によってこのchoco60と使い分けています。物理的なキー配置が同じなので（左右分割か否かという差異はあれど）同じキーマップにしておくと、切替の時に余計な脳のリソースを使わなくて済みます。</p>\n<p>あとはGUIでポチポチキーマップを変更します。できたら、<code class=\"language-text\">COMPILE</code>を押すとジャガイモが焼かれ始めます、、、少し待つと焼き上がりますので<code class=\"language-text\">FIRMWARE</code>のボタンからダウンロードします。</p>\n<h2 id=\"ファームウェアをキーボードに書き込む\" style=\"position:relative;\"><a href=\"#%E3%83%95%E3%82%A1%E3%83%BC%E3%83%A0%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%92%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%81%AB%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%80\" aria-label=\"ファームウェアをキーボードに書き込む permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ファームウェアをキーボードに書き込む</h2>\n<p>ここからは専用のソフトウェアをインストールしなければなりません。<a href=\"https://github.com/qmk/qmk_toolbox\">QMK Toolbox</a>というソフトウェアです。</p>\n<p>キーボードを接続するとこのような表示が出ます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">*** Atmel DFU device connected: ATMEL ATmega32U2 DFU (03EB:2FF0:0000)</code></pre></div>\n<p>この表示をもとに、画面上部にMCUを選択するドロップダウンリストから<code class=\"language-text\">ATmega32U2</code>を選択します。この選択が間違っているとファームウェアを書き込めないので注意が必要です。</p>\n<p><code class=\"language-text\">Local File</code>には、さきほど作ったファームウェアの場所を指定します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c88c2471f5f04dc7abca548034ed37d4/92bb4/QMKToolBox.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.44303797468356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAD+UlEQVQ4y62TW0xbdRzHm/jmi8DS8UBvnLbQ62l7TntOW8YlQZigm0BlmcYJI25ifNDscQNMZubig5Gr0cQHsyUmxhdtptlM1IxbL0wFCdezXoCuUCiwOQwu7f98zTkVJcFH/8kn/2/yTz75ff/5/xX9b9986sFstD6VTp7ZzTxu28k8DOxkHsnsbv4e2EpvB5bm7geW52KB9ZVMIL2SCWRWNwLZtXQglViXztuy6ztnV2MpNwCF4rP+G8fm70VW5udmsRpbQ/J+EkkhiYSQlHN8KY65mTkICwI217PYTG8hncpibW0H2xvbiC0mkBBWEF9KfCsLey/3KKenF5dnZ5Yw+9tCTlhOknhsjSTiKZKIPyCryTSJJzbIspAi2Y0s+ePRHslm98j61j75c2+f7GzuPtndeoiV2Oo3svBaX59ybGJaCE8tIhSdJ5OReTEUnRfDUwvi2OSsODoxLX7304wYvBMVw2OTYmg8IobHQ2J0IixOjobEuz+M5n6J/oqp0L2CEIDy1PMvCA4HjdraGuLzecHzHLxeHizLwGq1wOmg4XI6YLfbYTKZUFFRAZ1Oh7KyMpSWluY0Gg1eO9cRvPTOpYLwZONzgtVmR01NHeF5H1jWA5eLBcd54XZzcLt5cLwXHMfB6XTCZrPBaDSivLwcGo0mZzAY0NXZFezrfbcgPH2qSWAYK+rrqwjPO2EwqGA0FpByZaUKFKWCSqWGSqWCWq2WkSZTq9U5vV6P851dwZ4rvQoF2Yfy3KstQn29Dc3NPGlq4tDY6ER1tQl+PwWTSQ2LRYOKCi20Wp1cVavV/rNLE0pCacLent7ChG2tLwk07ZLqEYbxQILzeOH314DjfGAYHmazDVarVUaqLN2nlC0WS87hcKD7jTeDw0MjB8IWweNxoaqKJz6fBxzHgGVpMIwdNG2C2UzBYFBDq9XINQ9zpPLjLJQXL7QIzc2VaGtzkdZWJ1pabHi2gUJDgwoeTgWfrwwsqzoiOxBSFIXzHV3BK5d7FAoQKM+0twu814O6uhpSW1uNEyeq/n46HGjaAek6zGa5nsxBbSmbzeac3U6j+2J3cKB/sFC5taVVkJ4Dy7KEYRhRwuv1ilV+v+jxuEW73SYaDHpRrz8KRVE5U6UJr3ddCL5/7XpB+OLpk0tmixoMa8y5XIY8TWvzlF6Z1+tL8rrykrxOV5TX6Z7JlxwrzhcXH6KkOF9UVPREeVyJl8++8nVnR6dCcfvW98dvfH4z9dGH/RgaGMZQ/4jM8IDExwUGC4z8B8ODI/hk5FN8+cVXd+Svp9OUP333x9G3oqHo9fB45GpkIvpeePwwkX8ZO0poLHJ1KvTzB7dv3WmXhdKSwv/FX5va6988oxfLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"QMK Toolboxでキーボードにファームウェアを書き込む\"\n        title=\"QMK Toolboxでキーボードにファームウェアを書き込む\"\n        src=\"/static/c88c2471f5f04dc7abca548034ed37d4/f058b/QMKToolBox.png\"\n        srcset=\"/static/c88c2471f5f04dc7abca548034ed37d4/c26ae/QMKToolBox.png 158w,\n/static/c88c2471f5f04dc7abca548034ed37d4/6bdcf/QMKToolBox.png 315w,\n/static/c88c2471f5f04dc7abca548034ed37d4/f058b/QMKToolBox.png 630w,\n/static/c88c2471f5f04dc7abca548034ed37d4/40601/QMKToolBox.png 945w,\n/static/c88c2471f5f04dc7abca548034ed37d4/78612/QMKToolBox.png 1260w,\n/static/c88c2471f5f04dc7abca548034ed37d4/92bb4/QMKToolBox.png 1824w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\nこの状態で、キーボードのPCB上に物理的に付いているリセットボタンを押すとファームウェアの書き込みが始まります。</p>\n<p>ちなみに私の使用しているchoco60/rev2は分割キーボードなので、左右どちらもこの手順でファームウェアを書き込む必要があります。</p>\n<h2 id=\"書き込んだキーマップ\" style=\"position:relative;\"><a href=\"#%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%93%E3%81%A0%E3%82%AD%E3%83%BC%E3%83%9E%E3%83%83%E3%83%97\" aria-label=\"書き込んだキーマップ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>書き込んだキーマップ</h2>\n<p>また数ヶ月経つと変わるでしょうけど、現在の私のキーマップはこのようになっています。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad8aa65b463f746dbedb06dc1782da19/81315/my_keymap.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7ElEQVQ4y31U7XLDIAzj/V9z3S1AAJOQjyZtvZOAtPuz3nEGY2PZUmper5f+t/Cz1nI9Hg+e/4s3OWed51lhc56azTpNE/3btukwDHwQvtz804f93BvvPYNiSpqSXDaJaCmLPp/PK1gka0qJBWNMH0AqAFgjTCwaQmQCAmHrEra5rhuDUaQnhhjZEYrzHKI6P6pBxalVwiUSehAS9n3nox1Zvwe6jnxZFp1L4dmg0hhia+ONkq2LMLm3DRR1JO920QXyxxDUAyFeP85T57nwEkEYASriDvvzPDVJJQ9zha93hAL7fmcnZVnUXExaq857rixCNECCR7G+bt88oyPYwTq1zqm1Tvdt0/v9zncMqh/HoW978BJ7WPhvt5vaYajnD//5J+/kMmSuzaMyOPHch41WIC3M97qfenyTTWMeyEkKLkhIk0PXIuYI9SNBmjSqrETHMZBAkAFQ8DnnocNMJCJvyXTZoCIkA5SpzbV3grxqhXuQCrIMKmOYQIjqaMmP4UrsOoyNkC5qktOQgliyzAdFdFlXJtevRWrbseoQBfEg2kdyCOGKgyLgo4yQH6OadV0pXKp9LpdM1m0jctxjjt0PX6FG16bLwoJgGCj5b4NA5xzZ9Kw6cgRAk3P9zH5+hsvf4xztyEdRGJ/eL14Hy+aP2qp/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"現状のキーマップ\"\n        title=\"現状のキーマップ\"\n        src=\"/static/ad8aa65b463f746dbedb06dc1782da19/f058b/my_keymap.png\"\n        srcset=\"/static/ad8aa65b463f746dbedb06dc1782da19/c26ae/my_keymap.png 158w,\n/static/ad8aa65b463f746dbedb06dc1782da19/6bdcf/my_keymap.png 315w,\n/static/ad8aa65b463f746dbedb06dc1782da19/f058b/my_keymap.png 630w,\n/static/ad8aa65b463f746dbedb06dc1782da19/40601/my_keymap.png 945w,\n/static/ad8aa65b463f746dbedb06dc1782da19/78612/my_keymap.png 1260w,\n/static/ad8aa65b463f746dbedb06dc1782da19/81315/my_keymap.png 1656w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>先程書いたとおりchoco60の物理キー配置はHHKBと全く同じなので、私はHHKBにもこのキーマップを適用しています。</p>\n<p>特徴は、下のとおりです。</p>\n<ul>\n<li>左手の親指でEnterとBackspaceを押すことができる</li>\n<li>Fn ー キーマップ上ではMO(1) が左手の手のひらの付け根で押せるように、左下にマッピングされている\n<ul>\n<li>これはかなり変態なFnの押し方なのでは、と思われるかもしれませんが、ホームポジションから離れることなくFnキーを押すことができる最も良い方法だと思っています。とても理にかなっているので、すべてのHHKBユーザーにおすすめしたいです。</li>\n</ul>\n</li>\n<li>矢印キーをFn+h/j/k/lに割り当てており、Vimバインディングで操作することができる\n<ul>\n<li>このキーマップの真骨頂です。先述の通りFnは左手の手のひらの付け根で押し、左手でhjklを押せば矢印を操作できる</li>\n<li>つまりホームポジションを崩すことなく、矢印操作ができる</li>\n</ul>\n</li>\n<li>Media系の機能は使わないのですべて取り除いている</li>\n</ul>\n<p>Fnを左手の手のひらの付け根で押すとLeft CtrlやLeft Shiftが押しづらい、という唯一の欠点を克服するために、HHKBデフォルトの矢印操作もできるようにしています。</p>","frontmatter":{"title":"自作キーボードのキーマップを変更する","date":"April 25, 2022","description":"QMK Configuratorを使って自作キーボードのキーマップを変更する方法をメモ"}},"previous":{"fields":{"slug":"/cross-account-switch-role-with-awscli/"},"frontmatter":{"title":"AWS CLIでクロスアカウントのスイッチロールを行う"}},"next":{"fields":{"slug":"/sharing-wedding-movie-via-s3/"},"frontmatter":{"title":"Googleフォトの半分以下のコストで動画を保管・共有する"}}},"pageContext":{"id":"f792b167-8930-5df7-9622-25935eda252e","previousPostId":"827e9c33-17de-5d2d-b31f-be6ae068f536","nextPostId":"53dee3c9-4bf2-51da-b2b4-5e70b65eb9ea"}},"staticQueryHashes":["2841359383","3257411868"]}